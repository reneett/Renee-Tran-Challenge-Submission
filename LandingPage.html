<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
    <title>Renee Tran Living Spaces Code Challenge Submission</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- The styling for the page -->
    <style>
        body {
            background-color: #2E083D;
            color: white;
            font-family: Arial;
        }

        #navbar {
            background-color: #000;
            position: fixed;
            display: block;
            margin: 0 0 1rem;
            top: 0;
            left: 0;
            z-index: 100;
            width: 100%;
            height: 58px;
        }

        #main-content {
            max-width: 1620px;
            margin: 100px auto;
        }

        .container {
            display: flex;
            border-radius: 6px;
            padding: 1rem;
            gap: 0px 35px;
            justify-content: space-between;
        }

        .stacked {
            flex-flow: column wrap;
            justify-content: space-between;
            padding: 0 !important;
        }

        img {
            max-width: 100%;
            border-radius: 6px;
            height: auto;
        }

        .card-holder {
            padding: 0 15px;
            margin: 0 auto;
        }

        h2 {
            margin-bottom: 1rem;
            padding: 1rem;
            font-size: 32px;
        }

        .cards {
            display: flex;
            padding: 25px 0px;
            list-style: none;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
        }

        .card {
            display: flex;
            flex-direction: column;
            flex: 0 0 100%;
            background: var(--white);
            border-radius: 6px;
            scroll-snap-align: start;
            transition: all 0.2s;
        }

        .card:not(:last-child) {
            margin-right: 20px;
            margin-left: 20px;
        }

        .cards::-webkit-scrollbar {
        height: 12px;
        }

        .cards::-webkit-scrollbar-thumb,
        .cards::-webkit-scrollbar-track {
        border-radius: 92px;
        }

        .cards::-webkit-scrollbar-thumb {
        background: linear-gradient(to right, #FF5C00, #CB2DF4);;
        }

        .cards::-webkit-scrollbar-track {
        background: #0B0B0B;
        }

        @media (max-width: 580px) {
            .card {
                flex-basis: calc(50% - 10px);
            }

            h2 {
                font-size: 24px;
            }
        }

        @media (min-width: 581px) {
            .card {
                flex-basis: calc(18% - 30px);
            }
        }

    </style>
</head>
<body>
    <div id="navbar">
        <img src="assets\2308_gogglebox_logo.png">
        <a style="float: right;">Sign in</a>
    </div>
    <div id="main-content">
        <div class="container">
            <picture>
                <source media="(max-width:580px)" srcset="assets\2308_mobile_hero.jpg">
                <img src="assets\2308_desktop_hero.jpg">
            </picture>
        </div>

        <div>
            <h2>Now Playing</h2>
            <div class="container">
                <img src="assets\2308_01_now_playing.jpg">
                <div class="container stacked">
                    <img src="assets\2308_02_now_playing.jpg">
                    <img src="assets\2308_03_now_playing.jpg">
                </div>
            </div>
        <div>
            <h2>Tomorrow's Schedule</h2>
            <div class="card-holder">
                <ul class="cards">
                </ul>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // get tomorrow's date and populate schedule
            var date = new Date();
            date.setDate(date.getDate() + 1);
            var scheduleURL = 'https://api.tvmaze.com/schedule?country=US&date='+ date.toISOString().split('T')[0];

            //retrieve and extract image data, discarding null results
            $.ajax({
                type: 'GET',
                dataType: 'JSON',
                url: scheduleURL,
                success: function(response) {
                    var imageLinks = [];
                    for (let i = 0; i < response.length; i++) {
                        if (imageLinks.length == 24) {
                            break;
                        }
                        let image = response[i].show.image;
                        if (image != null && image.medium != null) {
                            imageLinks.push(image.medium);
                        }
                    }
                    // call function to insert images into cards
                    populateCards(imageLinks);
                }
            })
        });

        function populateCards(images) {
            const cards = document.getElementsByClassName('cards')[0];
            for (let i = 0; i < images.length; i++) {
                var card = document.createElement("li");
                card.setAttribute("class", "card");
                var cardData = document.createElement("img");
                cardData.setAttribute("class", "card-content");
                cardData.src = images[i];
                card.appendChild(cardData);
                cards.appendChild(card);
            }
        }
    </script>

    
</body>
</html>